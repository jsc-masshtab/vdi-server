

<ng-container *ngIf="data && data.length">
  <div class="table-component">
    <header>
      <div *ngFor="let obj of collection" class="table-header-part" [class.index-column]="obj.property == 'index'" [class.name-start]="obj.class == 'name-start'">
        {{obj.title}}
      </div>
    </header>

    <div class="table-area" *ngIf="data && data.length">
      <div *ngFor="let item of data;let i = index" class="table-area-object" [class.cursorTrue]="cursor" (click)="clickRow(item)" tabindex="-1">   <!--строка-->
        <div class="table-area-property" *ngFor="let obj of collection" [class.index-column]="obj.property == 'index'"  [class.name-start]="obj.class == 'name-start'"> <!--столбец-->
          <span *ngIf="obj.property == 'index'">{{ i+1 }}</span>

          <ng-container *ngIf="obj.icon"><fa-icon [icon]="['fas',obj.icon]" size="xs" class="icon-name-entity"></fa-icon></ng-container>

          <span *ngIf="obj.property_array">{{ item[obj.property_array].length }}</span>

          <span *ngIf="obj.property_boolean_true">
            <ng-container *ngIf="obj.property_boolean">{{ obj.property_boolean_true }}</ng-container>
            <ng-container *ngIf="!obj.property_boolean">{{ obj.property_boolean_false }}</ng-container>
          </span>

          <span *ngIf="obj.property_lv2 && item[obj.property]">{{ item[obj.property][obj.property_lv2] || '--' }}</span>

          <span *ngIf="(obj.property_lv2 && !item[obj.property]) || (obj.property_lv2_array && !item[obj.property][obj.property_lv2_array]) || (obj.property_array_prop && item[obj.property_array_prop] && !item[obj.property_array_prop].length)"> -- </span>

          <span *ngIf="!obj.property_lv2 && !obj.property_lv2_array && !obj.property_lv2_wrap && !obj.property_boolean_true && obj.property != 'index' && !item[obj.property_array] && !item[obj.property_array_prop]">{{ item[obj.property] || '--' }}</span>

          <span *ngIf="obj.property_lv2_wrap"><span>/</span>{{ item[obj.property][obj.property_lv2_prop2] || '--' }}</span>

          <span *ngIf="obj.property_lv2_array && item[obj.property][obj.property_lv2_array]">{{ item[obj.property][obj.property_lv2_array].length || '--' }}</span>

          <span *ngIf="obj.property_array_prop && item[obj.property_array_prop] && item[obj.property_array_prop].length"> <!-- св-во length есть и у строки -->
            <span *ngFor="let o of item[obj.property_array_prop];let i = index">
              {{ o[obj.property_array_prop_lv2] || '--' }}
              <ng-container *ngIf="item[obj.property_array_prop].length > 1 && i != item[obj.property_array_prop].length - 1">,</ng-container>
            </span>
          </span>

        </div> 
      </div>
    </div>
  </div>
</ng-container>

<ng-container *ngIf="data && !data.length|| !data">
  <div class="table-no-data">
    <fa-icon [icon]="['fas', 'meh']"></fa-icon>
  </div>
</ng-container>
