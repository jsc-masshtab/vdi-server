<!--
  (c) 2017 АО "НИИ "МАСШТАБ"
-->

<div class="new-select" [ngStyle]="styleSelect">
    <button *ngIf="actionSelect; else basicSelect" class="new-select-button" (click)="openList()" [class.open-list]="listTrigger">
        <i class="fa fa-cog"></i>
        <span>{{defaultData}}</span>
    </button>

    <ng-template #basicSelect>
        <div *ngIf="inputData.length || addedSelect" class="new-select-item" (click)="openList()" (keydown)="keydown($event)" [class.disabled-select]="disabled" [class.no-validate]="invalidData" [class.open-list]="listTrigger" tabindex="0">
            <span class="select-show" [class.block]="selectShowBlock" *ngFor="let show of selectedShow">{{show.title}} </span>
            <i *ngIf="!listTrigger" class="fa fa-angle-down"></i>
            <i *ngIf="listTrigger" class="fa fa-angle-up"></i>
        </div>

        <div *ngIf="inputData.length == 0 && !addedSelect" class="new-select-item center-flex" [class.disabled-select]="disabled" [class.no-validate]="invalidData">
            <span>{{defaultData}}</span>
        </div>
    </ng-template>

    <div class="new-select-list" *ngIf="listTrigger" [@anim]="listTrigger" [ngStyle]="styleDropDown">

        <div class="new-select-list-filter filter-border" *ngIf="filterSelect&&inputData.length>5">
            <span>Поиск по названию</span>
            <i class="fa fa-search"></i>
            <input #search (input)="searchData(search.value)">
        </div>

        <ul class="new-select-list-ul" *ngIf="!searchingData.length">
            <li class="new-select-list-item" tabindex="0"
                [class.disabled-item]="data?.disabled"
                [class.display-none]="data?.none"

                *ngFor="let data of inputData"
                (click)="sendData(data)" (keydown)="keydownLi($event,data)">
                    <i *ngIf="data.selected&&multySelect" class="fa fa-check-circle"></i>
                    <i *ngIf="!data.selected&&multySelect" class="fa fa-circle-o"></i>

                    <i *ngIf="!multySelect&&!actionSelect&&data.output==selectedData[0]" class="fa fa-check-circle"></i>
                    <i *ngIf="!multySelect&&!actionSelect&&data.output!=selectedData[0]" class="fa fa-circle-o"></i>

                    <i *ngIf="data.icon" [class]="data.icon"></i>

                    <span>{{data.input}}</span>

                    <ul *ngIf="data.alter">
                        <li class="alter-item" *ngFor="let al of data.alter" [hidden]="!al.value">{{al.key}}: {{al.value}}</li>
                    </ul>
            </li>
        </ul>

        <ul class="new-select-list-ul" *ngIf="searchingData.length">
            <li class="new-select-list-item"
                [class.disabled-item]="data?.disabled"

                *ngFor="let data of searchingData"
                (click)="sendData(data)">
                    <i *ngIf="data.selected&&multySelect" class="fa fa-check-circle"></i>
                    <i *ngIf="!data.selected&&multySelect" class="fa fa-circle-o"></i>

                    <i *ngIf="!multySelect&&!actionSelect&&data.output==selectedData[0]" class="fa fa-check-circle"></i>
                    <i *ngIf="!multySelect&&!actionSelect&&data.output!=selectedData[0]" class="fa fa-circle-o"></i>

                    <i *ngIf="data.icon" [class]="data.icon"></i>

                    <span>{{data.input}}</span>

                    <ul *ngIf="data.alter">
                        <li class="alter-item" *ngFor="let al of data.alter" [hidden]="!al.value">{{al.key}}: {{al.value}}</li>
                    </ul>
            </li>
        </ul>

        <div class="new-select-list-filter filter-border" *ngIf="addedSelect">
            <input #new >
            <button (click)="sendAdd(new); new.value=''">Добавить</button>
        </div>

        <div class="no-select" (click)="openList()"></div>
    </div>
</div>
