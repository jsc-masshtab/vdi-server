# Расчет СХД

Основными критериями выбора систем хранения данных помимо отказоустойчивости и стоимости являются **объем** и **производительность**. 

Рекомендуемые **объем и производительность HDD** для предлагаемых профилей использования содержатся в разделе [Профили использования](profiles.md)

## Объем

**Объем** СХД выбирается исходя из сценариев использования ВРС. 

При использовании **тонких клонов** в автоматическом пуле ВМ хранится на СХД только виртуальные диски шаблона и **дельты** (отличия дисков тонкого клона от дисков шаблона), которая формируется из пользовательских файлов. Как правило размер **дельты** находится в пределах 10-30 Гб.

!!! warning "Размер дельты"
    Если сценарии использования **тонких клонов** связанны с изменением большого числа файлов, например обновление или переустановка ОС, размер **дельты** может достигать полного объема используемых виртуальных дисков.

В случаях, когда используются ВМ с виртуальными дисками с предварительно выделенным местом объем, занимаемый такими жесткими дисками, равен полному объему виртуальных дисков.

При использовании ВМ с виртуальными дисками без предварительного выделения места объем, занимаемый такими дисками равен объему информации записанной на такие диски и может составлять от **0%** до **100%** от объема виртуального диска.

Также в **ECP VeiL** предусмотрена возможность хранения образов дисков в формате ```*.iso```, например установочных дисков ОС, резервных копий ВМ и прочих файлов. Это стоит учитывать при проектировании инфраструктуры. 

## Производительность

**Производительность** систем хранения данных это количество операций ввода/вывода, которые может обработать СХД за единицу времени. несмотря на то, что при нормальной рабочей нагрузке ВМ создает нагрузку в пределах 10-50 IOps на СХД, при старте ВМ может создавать нагрузку до 600 IOps. Массовый старт вм, например в начале рабочего дня который сопровождается повышенным количеством обращений к системам хранения данных, называется **Boot Storm**. 

Во время **Boot Storm** соотношение операций на чтение/запись обычно составляет около **80/20**, при этом максимальное количество **IOps**, которое генерирует 1 виртуальная машина при старте может составлять до **600 IOps**. При нормальной работе, т.е. после завершения **Boot Storm**, соотношение операций на чтение/запись обычно составляет около **20/80**, однако и количество **IOps** генерируемых одной ВМ составляет 10-50 **IOps**. В зависимости от количества одновременно запускаемых и работающий ВМ выбирается необходимая производительность СХД. 

Несмотря на то что, каждая ВМ при загрузке ОС может генерировать нагрузку с соотношением операций на чтение/запись **80/20** до **600 IOps** допускается эксплуатировать системы с производительностью от **150 IOps** в расчете на одну ВМ с некоторым снижением производительности (увеличение времени нагрузки).

В особенных случаях при нормальной работе и **Boot Strom** количество генерируемых нагрузок на СХД и соотношение операций на чтение/запись в разных режимах может отличаться от указанных.