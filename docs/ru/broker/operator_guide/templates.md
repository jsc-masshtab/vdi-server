# Шаблоны

Шаблон – это ВМ, состояние которой защищено от внесения изменений. Они полезны, потому что выступают 
как защищенные версии модели ВМ, которая может быть использована при создании новой ВМ. 
Шаблон ВМ может использоваться для создания тонких клонов. Так как шаблон – это образ определенной ВМ, 
он не может быть запущен как самостоятельная ВМ. 

Шаблоны могут существенно сократить время развертывания новых ВМ, потому что позволяют клонировать 
новые ВМ из шаблона без необходимости создания новой ВМ и установки ОС и программного обеспечения (ПО) на ВМ.
 
При развертывании сервиса VeiL  Broker шаблон используется как эталонная ВМ. Использование эталонных 
ВМ позволяет сохранять исходный образ ВМ неизменным. При использовании в сервисе VDI полных клонов 
каждое новое рабочее место является полной копией шаблона (с собственным виртуальным диском) и изменения, 
вносимые в процессе работы пользователя не влияют на эталонную ВМ.

В процессе работы пользователя могут вносится изменения в ОС ВМ, которые будут храниться только для этой ВМ, 
не влияя на эталонный образ. Также при использовании эталонных ВМ работает технология тонких клонов, 
когда система сохраняет только изменения, являющиеся результатом работы пользователя. При использовании 
технологии тонких клонов диск эталонной ВМ не копируется, поэтому не происходит внесение изменений 
в комплект ПО, доступный пользователю. Результат работы каждого пользователя хранится в отдельном 
временном файле. При выключении тонкого клона ВМ временный файл уничтожается и при следующем его запуске 
пользователь получает чистую копию эталонной ВМ. Для предотвращения потери данных пользователей 
рекомендуется настроить эталонный образ ВМ таким образом, чтобы при авторизации пользователя ему п
одключалось сетевое хранилище с его персональными данными. Данный механизм реализован 
автоматизированными средствами **перемещаемых профилей** в среде Windows Server и подключения сетевого 
NFS-хранилища в качестве home-директории в среде Linux.

При этом статические данные, необходимые для работы ОС ВМ, берутся из шаблона, а динамические данные, 
необходимые для работы ВМ, пишутся в отдельный файл. 

Список доступных шаблонов, созданных в среде ECP VeiL, подгружается автоматически с контроллера.

VeiL Broker дает возможность просмотра информации о доступных шаблонах. Изменение списка доступных 
шаблонов и их параметров осуществляется в среде ECP VeiL.

При выборе подраздела **Шаблоны** (раздел **Ресурсы** основного меню программы) в рабочей области 
окна интерфейса открывается вкладка **Шаблоны ВМ**, содержащая список имеющихся шаблонов ВМ, включая 
их названия, IP-адреса серверов, объем занимаемой оперативной памяти, IP-адреса контроллеров и статусы.
 
Для просмотра сведений о конкретном шаблоне ВМ необходимо нажать на его название, после чего в 
рабочей области отобразится название выбранного шаблона и информация по нему:

- название;
- описание;
- количество процессоров;
- оперативная память;
- операционная система;
- версия операционной системы;
- пул ресурсов;
- режим планшета (вкл/выкл);
- SPICE-потоки (вкл/выкл);
- высокая доступность (вкл/выкл);
- катастрофоустойчивость (вкл/выкл);
- удаленный доступ (вкл/выкл);
- автоматический запуск ВМ (вкл/выкл);
- тип загрузочного меню;
- статус;
- тэги.
