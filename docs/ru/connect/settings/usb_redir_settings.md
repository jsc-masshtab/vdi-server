# Настройки для возможности перенаправления USB (Spice и RDP)

- Текущий пользователь должен иметь право на перенаправление USB (Задается администратором в Web-интерфейсе 
[Разрешения](../../broker/auth_v3/client-permissions.md)).

- Если **VeiL Connect** запущен на Linux, то пользователь должен иметь разрешение на открытие USB 
(Выполнить chmod 666 для устройства / добавить пользователя в группу, владеющую устройством / изменить 
разрешения устройства).

- Для перенаправления по Spice в Web-интерфейсе **ECP VeiL** у ВМ должен быть добавлен USB Spice канал 
(**USB-устройства** -> **Подключить**).

- В Web-интерфейсе **ECP VeiL** у ВМ должен быть добавлен USB-контроллер **nec-xhci** (USB3.0) (**Настройки** - **Контроллер**).

- Если **VeiL Connect** запущен на машине с ОС Windows, то там необходимо установить
[UsbDk](https://github.com/daynix/UsbDk/releases/download/v1.00-22/UsbDk_1.0.22_x64.msi).

- Если на ВМ установлены ОС Windows 7 или Windows Server 2008, то для корректной работы USB на этих 
машинах должен быть установлен драйвер 
[NEC USB 3.0 Driver](https://support.lenovo.com/ru/en/downloads/ds018533).

- Для перенаправления USB по протоколу **usbredir** при подключении по RDP необходимо, чтобы машина, где запущен 
**VeiL Connect** (ТК), и узел, где находится ВМ, были взаимодоступны в сети (т.е. чтобы с узла проходило соединение (пинг) 
  до машины ТК). Также необходимо, чтобы на машине, где запущен **VeiL Connect**, были открыты на прием TCP соединений порты 17777-17782.

- Для перенаправления USB с использованием **RemoteFX** при подключении по RDP необходимо, чтобы удаленная машина поддерживала
RemoteFX USB Redirection.
